/*
 * Copyright (C) 2009-2023 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/base/Object"],function(U){"use strict";var n,p;var _="i2d/eam/workpermit/manages1/";return function(N,m,M){n=N;this.oMockserver=m;this.oMockserver._getOdataQueryExpand=function(d,o,e){for(var i=0;i<d.length;i++){if(JSON.stringify(d[i].DraftAdministrativeData)==="null"&&o.indexOf("DraftAdministrativeData")>-1){if(d[i].IsActiveEntity===false){d[i].DraftAdministrativeData={"d":{"DraftAdministrativeData":{"__metadata":{"id":"/sap/opu/odata/sap/UI_WORKPERMIT/I_DraftAdministrativeData(DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d40c0',DraftEntityType='R_WORKPERMITDRAFTTP')","uri":"/sap/opu/odata/sap/UI_WORKPERMIT/I_DraftAdministrativeData(DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d40c0',DraftEntityType='R_WORKPERMITDRAFTTP')","type":"cds_ui_workpermit.I_DraftAdministrativeDataType"},"DraftUUID":"506b4bc3-45cc-1edc-b5d1-c0cbe6c9b297","DraftEntityType":"R_WORKPERMITDRAFTTP","CreationDateTime":"/Date(1652866602000+0000)/","CreatedByUser":"DUMMY","LastChangeDateTime":"/Date(1652866664000+0000)/","LastChangedByUser":"DUMMY","DraftAccessType":"0","ProcessingStartDateTime":"/Date(1652866664000+0000)/","InProcessByUser":"","DraftIsKeptByUser":true,"EnqueueStartDateTime":"/Date(1652866664000+0000)/","DraftIsCreatedByMe":true,"DraftIsLastChangedByMe":true,"DraftIsProcessedByMe":false,"CreatedByUserDescription":"DUMMY","LastChangedByUserDescription":"DUMMY","InProcessByUserDescription":""},"SiblingEntity":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/SiblingEntity"}},"to_PermitNatureOfWork":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_PermitNatureOfWork"}},"to_PermitProtEquip":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_PermitProtEquip"}},"to_PermitSftyPrecaution":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_PermitSftyPrecaution"}},"to_TechnicalObject":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_TechnicalObject"}},"to_WorkPermitLongTxt":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_WorkPermitLongTxt"}},"to_WorkPermitOrder":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_WorkPermitOrder"}},"to_WorkPermitOrderOperation":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_WorkPermitOrderOperation"}},"to_WorkPermitPartner":{"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/WorkPermit(WorkPermit='',DraftUUID=guid'42010aef-4c96-1edd-87f2-821cbd1d20c0',IsActiveEntity=false)/to_WorkPermitPartner"}}}};}else{d[i].DraftAdministrativeData={};d[i].DraftAdministrativeData.InProcessByUser="null";d[i].DraftAdministrativeData.DraftIsProcessedByMe="null";d[i].DraftAdministrativeData.DraftIsLastChangedByMe="null";d[i].DraftAdministrativeData.InProcessByUserDescription="null";d[i].DraftAdministrativeData.LastChangedByUserDescription="null";}}}return M.prototype._getOdataQueryExpand.apply(this,[d,o,e]);};p='"__metadata":{"type":"'+N+'.WorkPermitType"';this.enhanceDraftHandling=function(r){r.push({method:"POST",path:new RegExp(/(WorkPermit)(\(([^/\?#]+)\)\/?(.*)?)?/),response:function(x,u){if(x.requestBody.indexOf(p)>-1){return this.PermitCreateRequest.call(this,x,u);}return false;}.bind(this)});r.push({method:"POST",path:new RegExp(/WorkPermitDiscard([?#].*)?/),response:function(x,u){this.DiscardPlan(x);return;}.bind(this)});r.push({method:"POST",path:new RegExp("(.*)Validate(.*)"),response:function(x,u){var R={"d":{"Validate":{"WrkPmtOrdOpAssgmtIsAllowed":"X","SystemMessageType":"SystemMessageType","SystemMessageText":"SystemMessageText"}}};x.respondJSON(202,{},JSON.stringify(R));}});r.push({method:"POST",path:new RegExp("(.*)CreateFromPopup(.*)"),response:function(x,u){var R={"d":{"DraftUUID":"506b4bc3-45cc-1edc-b5d1-c0cbe6c99297","WorkPermit":""}};x.respondJSON(202,{},JSON.stringify(R));}});r.push({method:"POST",path:new RegExp("(.*)UnassignJobs(.*)"),response:function(x,u){var R={};x.respondJSON(202,{},JSON.stringify(R));}});r.push({method:"POST",path:new RegExp("(.*)CheckAuthorization(.*)"),response:function(x,u){var R={"d":{"CheckAuthorization":{"WorkPermitCancelIsAllowed":true,"WrkPermitIsDeleted":true,WrkPmtResetDeletionIsAllowed:false,IsApproved:true,RevokeIsPossible:false}}};x.respondJSON(202,{},JSON.stringify(R));}});r.push({method:"POST",path:new RegExp("(.*)SetDeletionFlag(.*)"),response:function(x,u){var R={"d":{"WorkPermitCancelIsAllowed":true,"WrkPermitIsDeleted":true,"WrkPmtResetDeletionIsAllowed":false}};x.respondJSON(202,{},JSON.stringify(R));}});return r;};this.PermitCreateRequest=function(x,u){var a=["DraftAdministrativeData","SiblingEntity","to_PermitNatureOfWork","to_PermitProtEquip","to_PermitSftyPrecaution","to_TechnicalObject","to_WorkPermitApproval","to_WorkPermitLongTxt","to_WorkPermitOrder","to_WorkPermitOrderOperation","to_WorkPermitPartner","to_WorkPermitStatus"],d=this.oMockserver.getEntitySetData("WorkPermit"),D=this.oMockserver.getEntitySetData("I_DraftAdministrativeData"),s=jQuery.sap.getModulePath(_+"localService/mockutility/WorkPermitCreate",".json"),o=jQuery.sap.syncGetJSON(s).data;var b=o.DraftAdministrativeData;var k="/WorkPermit(WorkPermit='',DraftUUID=guid'506b4bc3-45cc-1edc-b5d1-c0cbe6c99297',IsActiveEntity=false)";this.setAssociations(o,a,k);var r={"d":o};o.__metadata={"id":k,"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/"+k,"type":n+".WorkPermitType"};d.push(o);D.push(b);this.oMockserver.setEntitySetData("WorkPermit",d);this.oMockserver.setEntitySetData("I_DraftAdministrativeData",D);x.respondJSON(200,{},JSON.stringify(r));return true;};this.DiscardPlan=function(x){if(x.url.match(/WorkPermit='()'/)){var W=x.url.match(/WorkPermit='()'/)[1];var P=this.oMockserver.getEntitySetData("WorkPermit");var f=P.filter(function(a){return a.WorkPermit!==W;});this.oMockserver.setEntitySetData("WorkPermit",f);}var r='{"d":{"WorkPermitDiscard":{"__metadata":{"type":"cds_ui_workpermit.DummyFunctionImportResult"},"IsInvalid":false}}}';x.respondJSON(202,{},r);return;};this.setAssociations=function(e,a,k){for(var i=0;i<a.length;i++){e[a[i]]={"__deferred":{"uri":"/sap/opu/odata/sap/UI_WORKPERMIT/"+k+"/"+a[i]}};}};};});
